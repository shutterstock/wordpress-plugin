!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=20)}([function(e,t){!function(){e.exports=this.wp.element}()},function(e,t){!function(){e.exports=this.React}()},function(e,t){!function(){e.exports=this.regeneratorRuntime}()},function(e,t){!function(){e.exports=this.wp.i18n}()},function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},function(e,t){function r(e,t,r,n,o,i,c){try{var s=e[i](c),a=s.value}catch(e){return void r(e)}s.done?t(a):Promise.resolve(a).then(n,o)}e.exports=function(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var c=e.apply(t,n);function s(e){r(c,o,i,s,a,"next",e)}function a(e){r(c,o,i,s,a,"throw",e)}s(void 0)}))}}},function(e,t){!function(){e.exports=this.wp.apiFetch}()},function(e,t,r){var n=r(11),o=r(12),i=r(13),c=r(15);e.exports=function(e,t){return n(e)||o(e,t)||i(e,t)||c()}},function(e,t){function r(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=r=function(e){return typeof e}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(t)}e.exports=r},function(e,t){!function(){e.exports=this.wp.dom}()},function(e,t){!function(){e.exports=this.wp.components}()},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var c,s=e[Symbol.iterator]();!(n=(c=s.next()).done)&&(r.push(c.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}}},function(e,t,r){var n=r(14);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){"use strict";r.r(t);var n=r(0),o=r(8),i=r.n(o),c=r(2),s=r.n(c),a=r(5),u=r.n(a),l=r(4),p=r.n(l),g=r(7),d=r.n(g),b=r(1),m=r(6),f=r.n(m),I=r(3),y=r(9);r(16);var w="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjI0cHgiIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDx0aXRsZT5kb3dubG9hZC1jb21wPC90aXRsZT4NCiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9ImRvd25sb2FkLWNvbXAiPg0KICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZSIgeD0iMCIgeT0iMCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij48L3JlY3Q+DQogICAgICAgICAgICA8cGF0aCBkPSJNMTUsMjAgTDE1LDIyIEw5LDIyIEw5LDIwIEwxNSwyMCBaIE03LDIwIEw3LDIyIEwyLDIyIEwyLDIwIEw3LDIwIFogTTIyLDIwIEwyMiwyMiBMMTcsMjIgTDE3LDIwIEwyMiwyMCBaIE0xMywyIEwxMywxNC4yIEwxNy4zLDkuOSBMMTguNywxMS4zIEwxMiwxOCBMNS4zLDExLjMgTDYuNyw5LjkgTDExLDE0LjIgTDExLDIgTDEzLDIgWiIgaWQ9IlNoYXBlIiBmaWxsPSIjRkZGRkZGIiBmaWxsLXJ1bGU9Im5vbnplcm8iPjwvcGF0aD4NCiAgICAgICAgPC9nPg0KICAgIDwvZz4NCjwvc3ZnPg==";function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){p()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var j=function(){var e=u()(s.a.mark((function e(t){var r,n,o,i,c,a,u,l,g,b=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=b.length>1&&void 0!==b[1]?b[1]:"image",e.prev=1,i="editorial"===r&&(null===(n=shutterstock)||void 0===n?void 0:n.country)?"&country=".concat(null===(o=shutterstock)||void 0===o?void 0:o.country):"",e.next=5,f()({path:"shutterstock/user/subscriptions?mediaType=".concat(r)});case 5:return c=e.sent,e.next=8,f()({path:"shutterstock/images/".concat(t,"?mediaType=").concat(r).concat(i)});case 8:return a=e.sent,u=a.assets,a.id,a.is_editorial,l=Object.entries(u).filter((function(e){var t=d()(e,2);t[0];return t[1].is_licensable})).reduce((function(e,t){var r=d()(t,2),n=r[0],o=r[1];return v(v({},e),{},p()({},n,o))}),{}),g=c.map((function(e){var t,n=null==e||null===(t=e.formats)||void 0===t?void 0:t.filter((function(e){var t=e.size,r=e.format;return!t.match(/supersize/i)&&"tiff"!==r&&"eps"!==r&&void 0!==r})).sort((function(e,t){return e.min_resolution-t.min_resolution})).map((function(e){return v(v({},e),{},{details_for_image:v({},l["".concat(e.size,"_").concat(e.format)])})}));if("editorial"===r){n=Object.entries(l||{}).map((function(e){var t,r=d()(e,2),n=r[0];return{details_for_image:r[1],size:(t=n,{small_jpg:"small",medium_jpg:"medium",original:"original"}[t])}}))}return v(v({},e),{},{formats:n})})),e.abrupt("return",g);case 17:throw e.prev=17,e.t0=e.catch(1),e.t0;case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=u()(s.a.mark((function e(){var t,r,n,o=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:"images",r=o.length>1&&void 0!==o[1]?o[1]:1,e.prev=2,e.next=5,f()({path:"shutterstock/images/licenses?mediaType=".concat(t,"&page=").concat(r)});case 5:return n=e.sent,e.abrupt("return",n);case 9:throw e.prev=9,e.t0=e.catch(2),e.t0;case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),C=j;function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){p()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var D=function(e){var t=e.timeout,r=void 0===t?5e3:t,o=e.onRemoveSnackbar,i=Object(n.useState)({show:!1,text:""}),c=d()(i,2),s=c[0],a=c[1];return Object(n.useEffect)((function(){var e=setTimeout((function(){a(M(M({},s),{},{show:!1,text:""})),o&&o()}),r);return function(){return clearTimeout(e)}}),[s.show]),{snackbar:s,setSnackbar:a}},x=r(10),k=(r(17),function(e){var t=e.text;return t&&Object(n.createElement)("div",{className:"components-shutterstock-snackbar__container"},Object(n.createElement)(x.Snackbar,null,"Shutterstock: ",t))});function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){p()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var E=function(e){var t=e.assetInfo,r=e.isMediaPage,n=e.commonInsertPreviewProps;return{name:"imageDetailsPage",path:"/images/:id",component:ShutterstockWidget.components.ImageDetailsPage,props:{buttons:r?[]:[_(_({},n),{},{icon:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjI0cHgiIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB2ZXJzaW9uPSIxLjEiIGZpbGw9IiMzRjYwNzgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDx0aXRsZT5kb3dubG9hZC1jb21wPC90aXRsZT4NCiAgICA8c3R5bGU+DQogICAgICAgIHBhdGggew0KICAgICAgICAgICAgZmlsbDogYmxhY2s7DQogICAgICAgIH0NCiAgICA8L3N0eWxlPg0KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPg0KICAgICAgICA8ZyBpZD0iZG93bmxvYWQtY29tcCI+DQogICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlIiB4PSIwIiB5PSIwIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiPjwvcmVjdD4NCiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNSwyMCBMMTUsMjIgTDksMjIgTDksMjAgTDE1LDIwIFogTTcsMjAgTDcsMjIgTDIsMjIgTDIsMjAgTDcsMjAgWiBNMjIsMjAgTDIyLDIyIEwxNywyMiBMMTcsMjAgTDIyLDIwIFogTTEzLDIgTDEzLDE0LjIgTDE3LjMsOS45IEwxOC43LDExLjMgTDEyLDE4IEw1LjMsMTEuMyBMNi43LDkuOSBMMTEsMTQuMiBMMTEsMiBMMTMsMiBaIiBpZD0iU2hhcGUiIGZpbGw9IiNGRkZGRkYiIGZpbGwtcnVsZT0ibm9uemVybyI+PC9wYXRoPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+"})],assetInfo:t}}};function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){p()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var T=function(){var e=u()(s.a.mark((function e(t,r){var n,o,i,c,a,u,l,p,g,d,b,m,y,w,h,v,j,O,C,L;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.toggleOverlay,o=r.licenseId,i=r.size,c=r.setAttributes,a=r.closeModal,u=r.handleError,l=r.isMediaPage,p=r.showSnackbar,e.prev=1,n(!0,Object(I.__)("wordpress:downloading_image","shutterstock")),d=null==t||null===(g=t.contributor)||void 0===g?void 0:g.id,b="",!d){e.next=10;break}return e.next=8,f()({path:"shutterstock/contributor/".concat(d)});case 8:w=e.sent,b=(null==w||null===(m=w.data)||void 0===m||null===(y=m[0])||void 0===y?void 0:y.display_name)||d;case 10:return e.next=12,f()({path:"shutterstock/images/".concat(t.id,"?mediaType=images")});case 12:return h=e.sent,v=h.assets,e.next=16,f()({path:"shutterstock/images/licenses/".concat(o,"/downloads"),method:"POST",contentType:"application/json",data:A({mediaType:"images",size:i,contributorName:b,imageId:t.id,description:t.description},null==v?void 0:v["".concat(i,"_jpg")])});case 16:(null==(j=e.sent)?void 0:j.success)?(O=j.data,C=O.url,L=O.id,l?l&&p(Object(I.__)("wordpress:text_image_stored_in_media_library","shutterstock")):(c({img:A(A({},t),{},{licensedImageUrl:C,contributorName:b,uploadedImageId:L})}),a()),n(!1)):u(j),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(1),n(!1),u(e.t0);case 24:case"end":return e.stop()}}),e,null,[[1,20]])})));return function(t,r){return e.apply(this,arguments)}}();function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){p()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var G=function(e){var t,r=e.closeModal,n=e.handleError,o=e.isMediaPage,i=e.routesConfig,c=e.setAttributes,a=e.showSnackbar,l=e.toggleOverlay,p=e.widgetRef;return{name:"licenseHistoryPage",path:"/license-history",component:ShutterstockWidget.components.LicenseHistoryPage,props:{theme:{container:"components-shutterstock-media-page__license-history-container"},onLicenseHistoryItemClick:function(e,t){var r=t.history;i[0].props=N(N({},i[0].props),{},{assetInfo:e}),p.current.updateRoutes({routesConfig:i}),p.current.toggleLoadingIndicator(!1),r.push("/images/".concat(e.id))},getMoreResults:(t=u()(s.a.mark((function e(t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("images",t+1);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),licenseHistory:[],overlayActions:[{label:Object(I.__)(o?"wordpress:text_download":"wordpress:text_dowbload_and_insert","shutterstock"),icon:w,onClick:function(e,t,i){e.preventDefault(),T(t,N(N({},i),{},{toggleOverlay:l,handleError:n,isMediaPage:o,setAttributes:c,showSnackbar:a,closeModal:r}))}}]}}};function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){p()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var R=function(e){var t,r=e.assetInfo,n=e.closeModal,o=e.commonLicensingProps,i=e.handleError,c=e.isMediaPage,a=e.setAttributes,l=e.showSnackbar,p=e.subscriptions,g=e.toggleOverlay;return{name:"licensingPage",path:"/license/images/:id",component:ShutterstockWidget.components.LicensingImagePage,props:{buttons:[z(z({},o),{},{onClick:(t=u()(s.a.mark((function e(t,r,o){var u,p,d,b,m,y,w,h,v,j,O,C,L,M;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=o.subscription,e.prev=1,g(!0,Object(I.__)("wordpress:text_licensing_image_please_wait","shutterstock")),b=null==r||null===(p=r.contributor)||void 0===p?void 0:p.id,m=null==r?void 0:r.media_type,w=(y="editorial"===m)?null==r?void 0:r.byline:"",!b||y){e.next=12;break}return e.next=10,f()({path:"shutterstock/contributor/".concat(b)});case 10:j=e.sent,w=(null==j||null===(h=j.data)||void 0===h||null===(v=h[0])||void 0===v?void 0:v.display_name)||b;case 12:return e.next=14,f()({path:"shutterstock/images/licenses",method:"POST",contentType:"application/json",data:z(z(z({subscription_id:null==u?void 0:u.id,size:null==u?void 0:u.size,id:r.id,description:r.description},(null==u?void 0:u.metadata)?{metadata:u.metadata}:{}),{},{contributorName:w},null==u?void 0:u.details_for_image),{},{mediaType:m,license:null==u?void 0:u.license,country:null===(d=shutterstock)||void 0===d?void 0:d.country,search_id:r.searchId})});case 14:(null==(O=e.sent)?void 0:O.success)?(C=O.data,L=C.url,M=C.id,c?c&&l(Object(I.__)("wordpress:text_image_stored_in_media_library","shutterstock")):(a({img:z(z({},r),{},{licensedImageUrl:L,contributorName:w,uploadedImageId:M})}),n()),g(!1)):i(O),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(1),g(!1),i(e.t0);case 22:case"end":return e.stop()}}),e,null,[[1,18]])}))),function(e,r,n){return t.apply(this,arguments)})})],assetInfo:r,subscriptions:p}}};function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach((function(t){p()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Q=/<\/?[a-z][^>]*?>/gi,J=/\r?\n|\r/gi,F=function(e){var t,r,o,c=e.setAttributes,a=e.closeModal,l=e.canLicense,p=void 0!==l&&l,g=e.assetInfo,m=void 0===g?{}:g,f=e.licenseImage,h=void 0!==f&&f,v=e.subscriptions,j=void 0===v?[]:v,L=e.isMediaPage,M=void 0!==L&&L,x=null===(t=shutterstock)||void 0===t||null===(r=t.permissions)||void 0===r?void 0:r.includes("can_user_search_editorial_images"),P=Object(b.useRef)(),_=Object(b.useState)({show:!1,text:""}),S=d()(_,2),A=S[0],T=S[1],Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return T(H(H({},A),{},{show:e,text:t}))},N=D({timeout:5e3}),B=N.snackbar,z=N.setSnackbar,W=function(e){return z(H(H({},B),{},{show:!0,text:e}))},F=function(e){var t,r,n,o=Object(I.__)("wordpress:text_something_went_wrong","shutterstock");500!==(null==e||null===(t=e.data)||void 0===t?void 0:t.statusCode)&&(null==e||null===(r=e.data)||void 0===r?void 0:r.message)&&(o=null==e||null===(n=e.data)||void 0===n?void 0:n.message);W(o),Z(!1)},U={label:Object(I.__)("wordpress:text_insert_preview","shutterstock"),onClick:function(e,t){e.preventDefault(),c({img:t}),a()}},Y=M?[]:[H(H({},U),{},{icon:w})],X=[E({assetInfo:m,commonInsertPreviewProps:U,isMediaPage:M})];if(p){var V={label:Object(I.__)("wordpress:text_license","shutterstock"),icon:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjI0cHgiIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDx0aXRsZT5zaG9wcGluZy1jYXJ0PC90aXRsZT4NCiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9InNob3BwaW5nLWNhcnQiPg0KICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZSIgeD0iMCIgeT0iMCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij48L3JlY3Q+DQogICAgICAgICAgICA8cGF0aCBkPSJNMTcsMTggQzE1LjksMTggMTUsMTguOSAxNSwyMCBDMTUsMjEuMSAxNS45LDIyIDE3LDIyIEMxOC4xLDIyIDE5LDIxLjEgMTksMjAgQzE5LDE4LjkgMTguMSwxOCAxNywxOCBaIE05LDE4IEM3LjksMTggNywxOC45IDcsMjAgQzcsMjEuMSA3LjksMjIgOSwyMiBDMTAuMSwyMiAxMSwyMS4xIDExLDIwIEMxMSwxOC45IDEwLjEsMTggOSwxOCBaIE0yMCw5IEwyMCw1IEw3LjMsNSBMNi45LDIgTDYsMiBMMywyIEMzLDMuMSAzLjksNCA1LDQgTDUuMSw0IEw3LjEsMTcgTDE1LDE3IEwxOSwxNyBDMTksMTUuOSAxOC4xLDE1IDE3LDE1IEw4LjksMTUgTDguNiwxMyBMMTYsMTMgQzE4LjIsMTMgMjAsMTEuMiAyMCw5IFogTTguMiwxMSBMNy42LDcgTDE4LDcgTDE4LDkgQzE4LDEwLjEgMTcuMSwxMSAxNiwxMSBMOC4yLDExIFoiIGlkPSJTaGFwZSIgZmlsbD0iI0ZGRkZGRiIgZmlsbC1ydWxlPSJub256ZXJvIj48L3BhdGg+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4=",isPrimary:!0,onClick:(o=u()(s.a.mark((function e(t,r,n){var o,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,o=r.media_type,Z(!0,Object(I.__)("wordpress:text_loading_please_wait","shutterstock")),e.next=6,C(r.id,o);case 6:i=e.sent,X[1].props=H(H({},X[1].props),{},{assetInfo:r,subscriptions:i,searchId:r.searchId}),P.current.updateRoutes({routesConfig:X}),P.current.toggleLoadingIndicator(!1),Z(!1),n.history.push("/license/images/".concat(r.id)),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(1),P.current.toggleLoadingIndicator(!1),Z(!1),F(e.t0);case 19:case"end":return e.stop()}}),e,null,[[1,14]])}))),function(e,t,r){return o.apply(this,arguments)})};Y.push(H({},V)),X[0].props.buttons.push(H({},V)),X.push(R({assetInfo:m,closeModal:a,commonLicensingProps:V,handleError:F,isMediaPage:M,setAttributes:c,showSnackbar:W,subscriptions:j,toggleOverlay:Z}),G({closeModal:a,handleError:F,isMediaPage:M,routesConfig:X,setAttributes:c,showSnackbar:W,toggleOverlay:Z,widgetRef:P}))}Object(b.useEffect)((function(){var e,t,r,n,o=[{label:Object(I.__)("wordpress:text_images","shutterstock"),assetType:"images"},{label:Object(I.__)("wordpress:text_editorial","shutterstock"),assetType:"editorial"}],c=H({mediaType:"images",imageType:["photo"],subtitle:"",container:P.current,showMore:!0,key:null===(e=shutterstock)||void 0===e?void 0:e.api_key,languageCode:null===(t=shutterstock)||void 0===t?void 0:t.language,dynamicTitle:!0,dynamicSubtitle:!0,showSearchBar:!0,assetsPerPage:26,onItemClick:function(e,t,r){e.preventDefault(),X[0].props=H(H({},X[0].props),{},{assetInfo:t}),P.current.updateRoutes({routesConfig:X}),P.current.toggleLoadingIndicator(!1),r.history.push("/images/".concat(t.id))},theme:{searchBar:{searchForm:"components-shutterstock-ui__searchForm",searchContainer:"components-shutterstock-ui__searchContainer",inputGroup:"components-shutterstock-ui__inputgroup",formControlInput:"components-shutterstock-ui__input",filterDrawer:{filterDrawerContainer:"components-shutterstock-ui__filterDrawerContainer",overlay:"components-shutterstock-ui__widget-drawer-position-fixed",filterDrawer:"components-shutterstock-ui__widget-drawer-position-fixed",filterButtonWrapper:"components-shutterstock-ui__filterButtonWrapper"}}},extraRoutes:H(H({},h?{initialRoute:"/license/images/".concat(m.id)}:{}),{},{routesConfig:X,excludeSearchBarRoutes:["^/license-history$"]}),overlayActions:Y,customHeaders:{"x-shutterstock-application":"Wordpress/".concat(null===(r=shutterstock)||void 0===r?void 0:r.version)},editorialCountry:null===(n=shutterstock)||void 0===n?void 0:n.country,searchFilters:H({showFilterDrawer:!0,images:{orientationFilter:!0}},x?{searchBarDropdownFilters:o}:{})},M?{}:{searchSuggestions:{enable:!0,textProvider:function(){var e=wp.data.select("core/editor").getEditedPostAttribute("title")||"",t=wp.data.select("core/editor").getEditedPostContent()||"";return Object(y.__unstableStripHTML)("".concat(e," ").concat(t)).replace(Q,"").replace(J,"").trim()}},title:Object(I.__)("wordpress:text_add_shuttersock_content_to_post","shutterstock")});if("object"===("undefined"==typeof window?"undefined":i()(window))&&window.ShutterstockWidget){var s=new window.ShutterstockWidget(c);s.search({query:""}),P.current=s}}),[]);var K=M?"media-page":"";return Object(n.createElement)(n.Fragment,null,p&&Object(n.createElement)("div",{className:"components-shutterstock-ui__navigation ".concat(A.show?"disabled":""," ").concat(K)},Object(n.createElement)("a",{onClick:function(e,t){P.current.getHistory().push("/")}},Object(I.__)("wordpress:text_home","shutterstock")),Object(n.createElement)("a",{className:"components-shutterstock-ui__download",onClick:function(){var e=u()(s.a.mark((function e(t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Z(!0,Object(I.__)("wordpress:text_loading_please_wait","shutterstock")),e.next=4,O("images");case 4:r=e.sent,X[2].props=H(H({},X[2].props),{},{licenseHistory:r}),P.current.updateRoutes({routesConfig:X}),P.current.toggleLoadingIndicator(!1),Z(!1),P.current.getHistory().push("/license-history"),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),P.current.toggleLoadingIndicator(!1),Z(!1),F(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()},Object(I.__)("wordpress:text_downloads","shutterstock"))),Object(n.createElement)("div",{ref:P,className:"components-shutterstock-ui__widget-container ".concat(K)}),A.show&&Object(n.createElement)("div",{className:"components-shutterstock-ui__widget-container-overlay ".concat(K)},A.text&&Object(n.createElement)("div",{className:"text"},A.text)),B.show&&Object(n.createElement)(k,{text:B.text}))},U=(r(18),function(){return Object(n.createElement)("svg",{className:"components-shutterstock-logo",viewBox:"0 0 175 26",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},Object(n.createElement)("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},Object(n.createElement)("g",{className:"components-shutterstock-logo__stck"},Object(n.createElement)("path",{d:"M104.443726,14.7782632 C104.178897,14.7303684 103.290589,14.5784737\r 103.030418,14.5292105 C101.627091,14.2698947 100.42538,13.9325789\r 100.42538,12.4806842 C100.42538,11.2340526 101.696293,10.6524737\r 103.277947,10.6524737 C105.631464,10.6524737 107.695532,11.7492632\r 107.931084,11.8703684 L109.221293,8.37063158 C108.724905,8.10584211\r 106.624905,6.95226316 103.317871,6.95226316 C100.288973,6.95226316\r 96.5893536,8.58752632 96.5893536,12.6565263 C96.5893536,16.2978947\r 99.1198669,17.4665263 101.558555,17.9078421 C101.895247,17.9714737\r 102.953897,18.1575789 103.256654,18.2116316 C104.896863,18.4969474\r 105.797814,19.1250526 105.797814,20.2286842 C105.797814,21.6292632\r 104.518251,22.2861053 102.581274,22.2861053 C99.4798479,22.2861053\r 97.659981,21.3357368 97.1343156,21.1133684 L95.705038,24.5371579\r C96.1488593,24.7725263 98.2661597,26 102.397624,26 C106.406654,26\r 109.623859,23.9583158 109.623859,20.1582105 C109.592586,16.6208421\r 107.280323,15.2791053 104.443726,14.7782632"}),Object(n.createElement)("path",{d:"M116.685076,0.579526316 L112.89097,2.73752632 L112.89097,7.30805263\r L110.893441,7.30805263 L110.893441,11.0390526 L112.89097,11.0390526\r L112.89097,19.1052105 C112.89097,22.5508947 114.268346,25.6448947\r 119.126426,25.6448947 L120.645532,25.6448947 L120.645532,21.9104737\r L120.075951,21.9104737 C117.687833,21.9104737 116.685076,20.4934737\r 116.685076,18.5687895 L116.685076,11.0390526 L121.042776,11.0390526\r L121.042776,7.30805263 L116.685076,7.30805263 L116.685076,0.579526316"}),Object(n.createElement)("path",{d:"M146.327281,10.7455263 C147.80846,10.7455263 149.324905,11.4379474\r 149.780038,13.1135789 L153.222814,11.7670526 C152.25865,8.26252632\r 149.092681,6.95226316 146.3,6.95226316 C141.296198,6.95226316\r 139.278707,10.1475263 139.278707,13.2531579 L139.278707,19.6977368\r C139.278707,22.802 141.296198,26 146.3,26 C149.092681,26\r 152.25865,24.6876842 153.222814,21.1831579 L149.780038,19.8373158\r C149.324905,21.5108947 147.80846,22.2074211 146.327281,22.2074211\r C143.749525,22.2074211 143.06616,20.7562105 143.06616,19.1017895\r L143.06616,13.8477368 C143.06616,12.1953684 143.749525,10.7455263 146.327281,10.7455263"}),Object(n.createElement)("polyline",{points:"162.551046 15.5438947 169.644202 7.30805263 164.978422 7.30805263\r 158.877376 14.4867895 158.877376 0.580210526 155.079943 0.580210526\r 155.079943 25.6448947 158.877376 25.6448947 158.877376 19.8085789\r 160.123004 18.3621579 165.555989 25.6448947 170.109316 25.6448947\r 162.551046 15.5438947"})),Object(n.createElement)("g",{className:"components-shutterstock-logo__o"},Object(n.createElement)("path",{d:"M131.656559,11.3093158 L127.711407,11.3093158 C127.083935,11.3093158\r 126.574905,11.8334211 126.574905,12.4758947 L126.574905,16.8781053\r L122.682985,16.8781053 L122.682985,12.4758947 C122.682985,9.62068421\r 124.9327,7.30805263 127.711407,7.30805263 L131.656559,7.30805263 L131.656559,11.3093158"}),Object(n.createElement)("path",{d:"M128.445342,21.6429474 L132.393156,21.6429474 C133.017966,21.6429474\r 133.528327,21.1195263 133.528327,20.475 L133.528327,16.0741579\r L137.419582,16.0741579 L137.419582,20.475 C137.419582,23.3302105\r 135.169202,25.6448947 132.393156,25.6448947 L128.445342,25.6448947 L128.445342,21.6429474"})),Object(n.createElement)("g",{className:"components-shutterstock-logo__shutter"},Object(n.createElement)("path",{d:"M64.1032319,7.30805263 L68.4596008,7.30805263 L68.4596008,11.0390526\r L64.1032319,11.0390526 L64.1032319,18.5687895 C64.1032319,20.4934737\r 65.1053232,21.9104737 67.4914449,21.9104737 L68.0610266,21.9104737\r L68.0610266,25.6448947 L66.5412548,25.6448947 C61.6818441,25.6448947\r 60.3084601,22.5508947 60.3084601,19.1052105 L60.3084601,11.0390526\r L53.9226236,11.0390526 L53.9226236,18.5687895 C53.9226236,20.4934737\r 54.926711,21.9104737 57.3128327,21.9104737 L57.8804183,21.9104737\r L57.8804183,25.6448947 L56.359981,25.6448947 C51.5025665,25.6448947\r 50.1265209,22.5508947 50.1265209,19.1052105 L50.1265209,11.0390526\r L48.2028517,11.0390526 L48.2028517,7.30805263 L50.1265209,7.30805263\r L50.1265209,2.73752632 L53.9226236,0.579526316 L53.9226236,7.30805263\r L60.3084601,7.30805263 L60.3084601,2.73752632 L64.1032319,0.579526316\r L64.1032319,7.30805263"}),Object(n.createElement)("path",{d:"M23.1419202,6.95226316 C21.9415399,6.95226316 20.7238593,7.19105263\r 19.6279468,7.66863158 L19.6279468,0.579526316 L15.8331749,0.579526316\r L15.8331749,25.6448947 L19.6279468,25.6448947 L19.6279468,11.3161579\r C20.3904943,10.8235263 21.4877376,10.5293158 22.5603612,10.5293158\r C24.9458175,10.5293158 26.068346,11.8929474 26.068346,13.9038421\r L26.068346,25.6448947 L29.8597909,25.6448947 L29.8597909,13.3708421\r C29.8597909,9.66994737 27.2527567,6.95226316 23.1419202,6.95226316"}),Object(n.createElement)("path",{d:"M42.3746198,21.9980526 C41.653327,22.3983158 40.7403992,22.6275263\r 39.8321293,22.6275263 C37.0001901,22.6275263 35.9355513,21.1441579\r 35.9355513,19.0983684 L35.9355513,7.30805263 L32.1414449,7.30805263\r L32.1414449,19.1702105 C32.1414449,23.7811053 34.7331749,26 39.365019,26\r C41.5834601,26 44.0401141,25.4232105 46.1673954,24.4762632 L46.1673954,7.30805263\r L42.3746198,7.30805263 L42.3746198,21.9980526"}),Object(n.createElement)("path",{d:"M8.73802281,14.7782632 C8.47519011,14.7303684 7.58555133,14.5784737\r 7.32471483,14.5292105 C5.92404943,14.2698947 4.71967681,13.9325789\r 4.71967681,12.4806842 C4.71967681,11.2340526 5.98925856,10.6524737\r 7.57290875,10.6524737 C9.92576046,10.6524737 11.9898289,11.7492632\r 12.2253802,11.8703684 L13.514924,8.37063158 C13.0218631,8.10584211\r 10.9198669,6.95226316 7.6108365,6.95226316 C4.58393536,6.95226316\r 0.88365019,8.58752632 0.88365019,12.6565263 C0.88365019,16.2978947\r 3.4115019,17.4665263 5.85351711,17.9078421 C6.18954373,17.9714737\r 7.24885932,18.1575789 7.55361217,18.2116316 C9.19315589,18.4969474\r 10.0901141,19.1250526 10.0901141,20.2286842 C10.0901141,21.6292632\r 8.81454373,22.2861053 6.87823194,22.2861053 C3.77414449,22.2861053\r 1.95427757,21.3357368 1.42794677,21.1133684 L0,24.5371579\r C0.445152091,24.7725263 2.56178707,26 6.69325095,26 C10.7022814,26\r 13.9194867,23.9583158 13.9194867,20.1582105 C13.8848859,16.6208421\r 11.573289,15.2791053 8.73802281,14.7782632"}),Object(n.createElement)("path",{d:"M80.3536122,15.0861579 L73.9557985,15.0861579 L73.9557985,13.7519474\r C73.9557985,12.2637895 74.6824144,10.6675263 77.1743346,10.6675263\r C79.5764259,10.6675263 80.3536122,12.2220526 80.3536122,13.6794211\r L80.3536122,15.0861579 Z M84.148384,13.2531579 C84.148384,9.89915789\r 81.6624525,6.95089474 77.1923004,6.95089474 C72.1179658,6.95089474\r 70.1696768,10.2091053 70.1696768,13.2531579 L70.1696768,19.3433158\r C70.1696768,23.5566842 72.7880228,26 77.1923004,26 C81.0775665,26\r 83.0943916,23.6901053 83.693251,22.3025263 L80.490019,20.3237895\r C80.2165399,21.1386842 78.948289,22.282 77.2175856,22.282\r C74.8713878,22.282 73.9691065,20.9361579 73.9691065,19.2495789\r L73.9557985,18.2451579 L84.148384,18.2451579 L84.148384,13.2531579\r L84.148384,13.2531579 Z"}),Object(n.createElement)("path",{d:"M86.5764259,13.26 L86.5764259,25.6448947 L90.3678707,25.6448947\r L90.3678707,13.5932105 C90.3678707,12.5408947 90.9487643,10.7421053\r 93.7334601,10.7421053 C94.1706274,10.7421053 95.1587452,10.8700526\r 95.4748099,10.9309474 L95.4748099,7.14863158 C95.1327947,7.06378947\r 94.3489544,6.95089474 93.5391635,6.95089474 C88.7163498,6.95089474\r 86.5764259,10.0613158 86.5764259,13.26"}))))});r(19);window.onload=function(){Object(n.render)(Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"components-shutterstock-media-page__logo"},Object(n.createElement)(U,null)),Object(n.createElement)(F,{isMediaPage:!0,canLicense:!0})),document.getElementById("shutterstock-widget"))}}]);